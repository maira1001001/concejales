<%= render partial: 'page_header', locals: { title: t('participations.collaborators.index.title'), sub_title: t('participations.collaborators.index.sub_title')  } %>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th><%= t 'activerecord.attributes.user.full_name' %></th>
        <th><%= t 'activerecord.attributes.user.email' %></th>
        <th><%= t 'activerecord.attributes.user.status' %></th>
        <th><%= t 'global.index.actions' %></th>
      </tr>
    </thead>

    <tbody>
      <%= content_tag_for(:tr, @collaborators) do |collaborator| %>
        <td><%= collaborator.full_name %></td>
        <td><%= collaborator.email %></td>
        <td><%= t_enum collaborator, :status %></td>
        <td>
          <%= render 'participations/enabling_disabling_collaborator', collaborator: collaborator -%>
          <%= link_to icon('pencil'), edit_collaborator_path(collaborator),
            title: t('global.actions.edit'),
            data: { toggle: 'tooltip', placement: 'right' } %>
          <%= link_to icon('trash'), destroy_collaborator_path(collaborator), method: :delete,
            title: t('global.actions.destroy'),
            data: { toggle: 'tooltip', placement: 'right',
                    confirm: "¿Está seguro que desea eliminar al asesor #{collaborator.full_name}?" } %>
          <% if collaborator.pending_invitation? %>
            <%= link_to icon('share-alt'), user_resend_invitation_path(collaborator), method: :post,
              title: "Reenviar invitación al asesor",
              data: { toggle: 'tooltip', placement: 'right',
                      confirm: "¿Desea reenviar la invitación a #{collaborator.email}?" } %>
          <% end %>
      </td>
    <% end %>
    </tbody>
  </table>
</div>
